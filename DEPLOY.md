# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é Fudly Bot –Ω–∞ Railway

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ [railway.app](https://railway.app)
2. –ù–∞–∂–º–∏—Ç–µ **New Project** ‚Üí **Deploy from GitHub**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `fudly-bot`
4. –ù–∞–∂–º–∏—Ç–µ **Add Database** ‚Üí **PostgreSQL**

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway Dashboard ‚Üí Variables –¥–æ–±–∞–≤—å—Ç–µ:

```env
TELEGRAM_BOT_TOKEN=7969096859:AAGQCRAKTHCPOVqEcyzbLabl_neyH6QWEzw
ADMIN_ID=253445521
PORT=8080
WEBHOOK_PATH=/webhook
```

**–ù–ï —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Ç–µ `WEBHOOK_URL` –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ!**

### 3. –ü–µ—Ä–≤—ã–π –¥–µ–ø–ª–æ–π

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`
- –°–æ–∑–¥–∞—Å—Ç `DATABASE_URL` –¥–ª—è PostgreSQL
- –ó–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç –∫–æ–º–∞–Ω–¥–æ–π –∏–∑ `Procfile`
- –í—ã–¥–µ–ª–∏—Ç –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ–º–µ–Ω

### 4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WEBHOOK_URL

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –¥–µ–ø–ª–æ—è:

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –¥–æ–º–µ–Ω –∏–∑ Railway (–Ω–∞–ø—Ä–∏–º–µ—Ä `fudly-bot-production-xxx.up.railway.app`)
2. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:
   ```env
   WEBHOOK_URL=https://fudly-bot-production-xxx.up.railway.app
   ```
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç redeploy

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/health`
   - –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: `{"status": "ok", "bot": "Fudly"}`

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard:
   - –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫—É "‚úÖ Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É –≤ Telegram

## –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Polling)

–í `.env`:
```env
WEBHOOK_URL=
# –∏–ª–∏ —É–¥–∞–ª–∏—Ç–µ —Å—Ç—Ä–æ–∫—É WEBHOOK_URL
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ polling —Ä–µ–∂–∏–º–µ.

### Production –Ω–∞ Railway (Webhook)

–í Railway Variables:
```env
WEBHOOK_URL=https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –≤ webhook —Ä–µ–∂–∏–º–µ.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –æ—Ç @BotFather
- `ADMIN_ID` - –≤–∞—à Telegram ID

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è Railway:
- `DATABASE_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL

### –î–ª—è webhook (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- `WEBHOOK_URL` - –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç webhook
- `WEBHOOK_PATH` - –ø—É—Ç—å webhook (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `/webhook`)
- `PORT` - –ø–æ—Ä—Ç –¥–ª—è HTTP —Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `8080`)

## Troubleshooting

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ Railway

**–ü—Ä–æ–±–ª–µ–º–∞**: Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
**–†–µ—à–µ–Ω–∏–µ**: 
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `WEBHOOK_URL` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å "‚úÖ Webhook —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
3. –û—Ç–∫—Ä–æ–π—Ç–µ `https://–≤–∞—à-–¥–æ–º–µ–Ω/health` - –¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å OK

**–ü—Ä–æ–±–ª–µ–º–∞**: 404 –Ω–∞ webhook
**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `WEBHOOK_PATH=/webhook`
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –±–æ—Ç –∑–∞–ø—É—â–µ–Ω (–ª–æ–≥–∏ –≤ Railway)

### –õ–æ–∫–∞–ª—å–Ω–æ –±–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ—Ä–∏—Ç–µ –∏–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ `WEBHOOK_URL` –≤ `.env`

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –Ω–∞–π–¥–µ–Ω–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: Railway –Ω–µ —Å–æ–∑–¥–∞–ª PostgreSQL
**–†–µ—à–µ–Ω–∏–µ**: 
1. –í Railway –¥–æ–±–∞–≤—å—Ç–µ **Database** ‚Üí **PostgreSQL**
2. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `DATABASE_URL` —Å–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–π SQLite –Ω–∞ Railway PostgreSQL

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –µ—Å–ª–∏ `DATABASE_URL` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

–î–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö:
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ SQLite
2. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –≤ PostgreSQL –Ω–∞ Railway

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Health Check
```bash
curl https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/health
```

### Metrics (Prometheus format)
```bash
curl https://–≤–∞—à-–¥–æ–º–µ–Ω.up.railway.app/metrics
```

### –õ–æ–≥–∏
Railway Dashboard ‚Üí Deployments ‚Üí View Logs

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```env
REDIS_URL=redis://...
```

### –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
```env
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR
```

### Rate limiting
```env
MAX_REQUESTS_PER_MINUTE=30
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git!

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.gitignore`:
```
.env
*.db
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard
2. –û—Ç–∫—Ä–æ–π—Ç–µ `/health` endpoint
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
