<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ü–∞–Ω–µ–ª—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ - Fudly</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-title">
                    <div class="store-icon">üè™</div>
                    <div>
                        <h1>Fudly Partner</h1>
                        <div class="user-info" id="userInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="tabs">
            <button class="tab active" data-view="products">
                <span class="tab-icon">üì¶</span>
                <span class="tab-label">–¢–æ–≤–∞—Ä—ã</span>
            </button>
            <button class="tab" data-view="orders">
                <span class="tab-icon">üé´</span>
                <span class="tab-label">–ó–∞–∫–∞–∑—ã</span>
            </button>
            <button class="tab" data-view="stats">
                <span class="tab-icon">üìä</span>
                <span class="tab-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
            </button>
            <button class="tab" data-view="settings">
                <span class="tab-icon">‚öôÔ∏è</span>
                <span class="tab-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
            </button>
        </nav>

        <!-- Quick Stats Bar -->
        <div class="quick-stats" id="quickStats">
            <div class="quick-stat">
                <div class="quick-stat-value" id="todayOrders">-</div>
                <div class="quick-stat-label">–°–µ–≥–æ–¥–Ω—è</div>
            </div>
            <div class="quick-stat">
                <div class="quick-stat-value" id="todayRevenue">-</div>
                <div class="quick-stat-label">–í—ã—Ä—É—á–∫–∞</div>
            </div>
            <div class="quick-stat">
                <div class="quick-stat-value" id="activeProducts">-</div>
                <div class="quick-stat-label">–¢–æ–≤–∞—Ä–æ–≤</div>
            </div>
            <div class="quick-stat">
                <div class="quick-stat-value" id="avgTicket">-</div>
                <div class="quick-stat-label">–°—Ä–µ–¥–Ω–∏–π —á–µ–∫</div>
            </div>
        </div>

        <!-- Content Views -->
        <main class="content">
            <!-- Products View -->
            <div id="products-view" class="view active">
                <div class="view-header">
                    <div class="view-title-section">
                        <h2>–¢–æ–≤–∞—Ä—ã</h2>
                        <button class="btn btn-primary btn-icon" id="addProductBtn">
                            <span>‚ûï</span>
                            <span>–î–æ–±–∞–≤–∏—Ç—å</span>
                        </button>
                    </div>
                </div>
                
                <!-- Compact Filter Bar -->
                <div class="filter-section">
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="search" id="searchProducts" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é...">
                    </div>
                    
                    <div class="filter-pills">
                        <select id="filterStatus" class="filter-select">
                            <option value="all">üìã –í—Å–µ</option>
                            <option value="active">‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ</option>
                            <option value="inactive">‚õî –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ</option>
                        </select>
                        <select id="filterCategory" class="filter-select">
                            <option value="all">üè∑Ô∏è –ö–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                            <option value="bakery">ü•ñ –í—ã–ø–µ—á–∫–∞</option>
                            <option value="dairy">ü•õ –ú–æ–ª–æ—á–Ω—ã–µ</option>
                            <option value="meat">ü•© –ú—è—Å–æ</option>
                            <option value="produce">ü•¨ –û–≤–æ—â–∏</option>
                            <option value="prepared">üç± –ì–æ—Ç–æ–≤–æ–µ</option>
                            <option value="other">üì¶ –î—Ä—É–≥–æ–µ</option>
                        </select>
                        <select id="sortProducts" class="filter-select">
                            <option value="date-desc">üÜï –ù–æ–≤—ã–µ</option>
                            <option value="date-asc">üïê –°—Ç–∞—Ä—ã–µ</option>
                            <option value="price-asc">üíµ –î–µ—à–µ–≤–ª–µ</option>
                            <option value="price-desc">üí∞ –î–æ—Ä–æ–∂–µ</option>
                            <option value="quantity-asc">‚ö†Ô∏è –ú–∞–ª–æ</option>
                            <option value="quantity-desc">üì¶ –ú–Ω–æ–≥–æ</option>
                            <option value="name-asc">–ê‚Üí–Ø</option>
                            <option value="name-desc">–Ø‚Üí–ê</option>
                        </select>
                        <button class="btn-icon-only" id="importCsvBtn" title="–ò–º–ø–æ—Ä—Ç CSV">
                            üì•
                        </button>
                    </div>
                </div>
                
                <div class="bulk-actions" id="bulkActionsBar" style="display:none;">
                    <div class="bulk-info">
                        <span class="bulk-icon">‚òëÔ∏è</span>
                        <span id="selectedCount">0 –≤—ã–±—Ä–∞–Ω–æ</span>
                    </div>
                    <div class="bulk-buttons">
                        <button class="btn-compact btn-secondary" onclick="bulkToggleStatus()">üîÑ –°—Ç–∞—Ç—É—Å</button>
                        <button class="btn-compact btn-danger" onclick="bulkDelete()">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        <button class="btn-compact" onclick="clearSelection()">‚úñÔ∏è</button>
                    </div>
                </div>
                <div id="productsList" class="products-grid">
                    <div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤...</div>
                </div>
            </div>

            <!-- Orders View -->
            <div id="orders-view" class="view">
                <div class="view-header">
                    <h2>–ó–∞–∫–∞–∑—ã</h2>
                    <select id="filterOrderStatus">
                        <option value="all">–í—Å–µ</option>
                        <option value="pending">–û–∂–∏–¥–∞—é—Ç</option>
                        <option value="confirmed">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã</option>
                        <option value="completed">–ó–∞–≤–µ—Ä—à–µ–Ω—ã</option>
                        <option value="cancelled">–û—Ç–º–µ–Ω–µ–Ω—ã</option>
                    </select>
                </div>
                <div id="ordersList" class="orders-list">
                    <div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤...</div>
                </div>
            </div>

            <!-- Stats View -->
            <div id="stats-view" class="view">
                <div class="view-header">
                    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                    <select id="statsPeriod">
                        <option value="today">–°–µ–≥–æ–¥–Ω—è</option>
                        <option value="yesterday">–í—á–µ—Ä–∞</option>
                        <option value="week">–ù–µ–¥–µ–ª—è</option>
                        <option value="month">–ú–µ—Å—è—Ü</option>
                    </select>
                </div>
                <div id="statsContent" class="stats-container">
                    <div class="loader">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏...</div>
                </div>
            </div>

            <!-- Settings View -->
            <div id="settings-view" class="view">
                <div class="view-header">
                    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞</h2>
                </div>
                <form id="settingsForm" class="settings-form">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞</label>
                        <input type="text" id="storeName" required>
                    </div>
                    <div class="form-group">
                        <label>–ê–¥—Ä–µ—Å</label>
                        <input type="text" id="storeAddress">
                    </div>
                    <div class="form-group">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                        <input type="tel" id="storePhone">
                    </div>
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="storeDescription" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </form>
            </div>
        </main>

        <!-- Modals -->
        <!-- Add/Edit Product Modal -->
        <div id="productModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="productModalTitle">–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <form id="productForm">
                    <input type="hidden" id="productId">
                    
                    <!-- –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø -->
                    <div class="form-section">
                        <div class="form-section-title">üìù –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                        
                        <div class="form-group">
                            <label>–ù–∞–∑–≤–∞–Ω–∏–µ * <small>(3-200 —Å–∏–º–≤–æ–ª–æ–≤)</small></label>
                            <input type="text" id="productTitle" required 
                                   minlength="3" maxlength="200"
                                   placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–≤–µ–∂–∏–π —Ö–ª–µ–±">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>–¶–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π * <small>(—Å—É–º)</small></label>
                                <input type="number" id="productDiscountPrice" required step="1"
                                       min="1" max="100000000"
                                       placeholder="20000">
                            </div>
                            <div class="form-group">
                                <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ *</label>
                                <input type="number" id="productQuantity" required 
                                       min="0" max="100000"
                                       placeholder="50">
                            </div>
                        </div>
                    </div>
                    
                    <!-- –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø -->
                    <div class="form-section form-section-optional">
                        <div class="form-section-title">üè∑Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                                <select id="productCategory">
                                    <option value="other">–î—Ä—É–≥–æ–µ</option>
                                    <option value="bakery">ü•ñ –í—ã–ø–µ—á–∫–∞</option>
                                    <option value="dairy">ü•õ –ú–æ–ª–æ—á–Ω—ã–µ</option>
                                    <option value="meat">ü•© –ú—è—Å–æ</option>
                                    <option value="produce">ü•¨ –û–≤–æ—â–∏</option>
                                    <option value="prepared">üç± –ì–æ—Ç–æ–≤–æ–µ</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>–ï–¥–∏–Ω–∏—Ü–∞</label>
                                <select id="productUnit">
                                    <option value="—à—Ç">—à—Ç</option>
                                    <option value="–∫–≥">–∫–≥</option>
                                    <option value="–ª">–ª</option>
                                    <option value="–≥">–≥</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>–°—Ç–∞—Ä–∞—è —Ü–µ–Ω–∞ <small>(–¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–∫–∏–¥–∫–∏, —Å—É–º)</small></label>
                            <input type="number" id="productOriginalPrice" step="1"
                                   min="0" max="100000000"
                                   placeholder="25000">
                        </div>
                        
                        <div class="form-group">
                            <label>–°—Ä–æ–∫ –≥–æ–¥–Ω–æ—Å—Ç–∏</label>
                            <div class="expiry-quick-buttons">
                                <button type="button" class="btn-quick-expiry" data-days="1">+1 –¥–µ–Ω—å</button>
                                <button type="button" class="btn-quick-expiry" data-days="3">+3 –¥–Ω—è</button>
                                <button type="button" class="btn-quick-expiry" data-days="7">+7 –¥–Ω–µ–π</button>
                            </div>
                            <input type="date" id="productExpiryDate">
                        </div>
                        
                        <div class="form-group">
                            <label>–û–ø–∏—Å–∞–Ω–∏–µ <small>(–¥–æ 2000 —Å–∏–º–≤–æ–ª–æ–≤)</small></label>
                            <textarea id="productDescription" rows="3" 
                                      maxlength="2000"
                                      placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>–§–æ—Ç–æ <small>(–º–∞–∫—Å. 10 –ú–ë)</small></label>
                            <input type="file" id="productPhoto" 
                                   accept="image/jpeg,image/png,image/gif,image/webp"
                                   style="display:none">
                            <button type="button" class="btn btn-secondary" onclick="document.getElementById('productPhoto').click()">üì∑ –í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</button>
                            <div id="photoPreview"></div>
                            <div id="photoProgress" class="photo-progress" style="display:none">
                                <div class="photo-progress-bar"></div>
                                <div class="photo-progress-text">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelProductBtn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- CSV Import Modal -->
        <div id="csvModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>–ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ CSV</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="csv-import">
                    <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ CSV —Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Å—Ç–∞—Ä–∞—è_—Ü–µ–Ω–∞, —Ü–µ–Ω–∞_—Å–æ_—Å–∫–∏–¥–∫–æ–π, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –µ–¥–∏–Ω–∏—Ü–∞, —Å—Ä–æ–∫_–≥–æ–¥–Ω–æ—Å—Ç–∏, –æ–ø–∏—Å–∞–Ω–∏–µ</p>
                    <div class="drop-zone" id="dropZone">
                        <p>üìÅ –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ CSV —Ñ–∞–π–ª —Å—é–¥–∞ –∏–ª–∏</p>
                        <input type="file" id="csvFile" accept=".csv" style="display:none">
                        <button type="button" class="btn btn-secondary" id="selectCsvBtn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</button>
                    </div>
                    <div id="csvPreview"></div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" id="cancelCsvBtn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="button" class="btn btn-primary" id="importCsvConfirmBtn" disabled>üì• –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
