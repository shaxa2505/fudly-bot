# üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞ Fudly Bot

> **–ë—ã—Å—Ç—Ä—ã–π –≥–∏–¥:** –ß—Ç–æ –≥–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –∑–∞ —á—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 8 –¥–µ–∫–∞–±—Ä—è 2025

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
fudly-bot-main/
‚îú‚îÄ‚îÄ bot.py                    # üöÄ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ - –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ database.py               # üíæ –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å Database (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
‚îú‚îÄ‚îÄ database_pg.py            # üíæ PostgreSQL –¥—Ä–∞–π–≤–µ—Ä (–æ—Å–Ω–æ–≤–Ω–æ–π)
‚îú‚îÄ‚îÄ fsm_storage_pg.py         # üíæ FSM —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ PostgreSQL
‚îú‚îÄ‚îÄ localization.py           # üåç –ü–µ—Ä–µ–≤–æ–¥—ã (ru/uz)
‚îú‚îÄ‚îÄ logging_config.py         # üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ security.py               # üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ app/                      # üèóÔ∏è –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (services, API, domain)
‚îú‚îÄ‚îÄ handlers/                 # üéÆ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ database_pg_module/       # üíæ PostgreSQL –º–æ–¥—É–ª—å —Å –º–∏–∫—Å–∏–Ω–∞–º–∏
‚îú‚îÄ‚îÄ migrations/               # üì¶ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îú‚îÄ‚îÄ tests/                    # ‚úÖ –¢–µ—Å—Ç—ã (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
‚îú‚îÄ‚îÄ docs/                     # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ webapp/                   # üåê Mini App (HTML/JS/CSS)
```

---

## üéÆ Handlers - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### üìÇ handlers/common/ - –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏

**–ß—Ç–æ –∑–¥–µ—Å—å:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ (/start, /help)
- –°–º–µ–Ω–∞ –≥–æ—Ä–æ–¥–∞ –∏ —è–∑—ã–∫–∞
- –£—Ç–∏–ª–∏—Ç—ã –∏ middleware

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:**

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-------|------------|
| `commands.py` | 561 | –ö–æ–º–∞–Ω–¥—ã: /start, /code, —Å–º–µ–Ω–∞ –≥–æ—Ä–æ–¥–∞ |
| `registration.py` | 91 | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: —Ç–µ–ª–µ—Ñ–æ–Ω, –≥–æ—Ä–æ–¥ |
| `utils.py` | 342 | –£—Ç–∏–ª–∏—Ç—ã: html_escape, middleware |
| `states.py` | - | FSM —Å–æ—Å—Ç–æ—è–Ω–∏—è (Registration, BookOffer –∏ —Ç–¥) |
| `cancel.py` | - | –û—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ñ–ª–æ—É |
| `webapp.py` | - | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mini App |

**–ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `cmd_start()` - –û–±—Ä–∞–±–æ—Ç–∫–∞ /start
- `process_phone()` - –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `registration_city_callback()` - –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞
- `html_escape()` - –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ HTML
- `get_appropriate_menu()` - –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ–Ω—é

---

### üìÇ handlers/bookings/ - –ó–∞–∫–∞–∑—ã –Ω–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑ (pickup)

**–ß—Ç–æ –∑–¥–µ—Å—å:**
- –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞—ë—Ç –±—Ä–æ–Ω—å –Ω–∞ —Ç–æ–≤–∞—Ä
- –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç/–æ—Ç–∫–ª–æ–Ω—è–µ—Ç
- –†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
bookings/
‚îú‚îÄ‚îÄ router.py              # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å—ë)
‚îú‚îÄ‚îÄ customer.py            # 1275 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
‚îú‚îÄ‚îÄ partner.py             # 728 —Å—Ç—Ä–æ–∫ - –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞
‚îú‚îÄ‚îÄ booking_ui.py          # UI –∫–∞—Ä—Ç–æ—á–∫–∏ –±—Ä–æ–Ω–µ–π
‚îî‚îÄ‚îÄ utils.py               # –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
```

**–§–ª–æ—É –∫–ª–∏–µ–Ω—Ç–∞ (customer.py):**
1. `book_offer_start()` - –ù–∞—á–∞—Ç—å –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. `pbook_change_qty()` - –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
3. `pbook_select_method()` - –í—ã–±—Ä–∞—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É/—Å–∞–º–æ–≤—ã–≤–æ–∑
4. `pbook_confirm()` - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑
5. `create_booking()` - –°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω—å –≤ –ë–î

**–§–ª–æ—É –ø—Ä–æ–¥–∞–≤—Ü–∞ (partner.py):**
1. `partner_confirm_booking()` - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –±—Ä–æ–Ω—å
2. `partner_reject_booking()` - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –±—Ä–æ–Ω—å
3. `complete_booking()` - –ó–∞–≤–µ—Ä—à–∏—Ç—å (–≤—ã–¥–∞–Ω–æ –∫–ª–∏–µ–Ω—Ç—É)
4. `rate_booking()` - –û—Ü–µ–Ω–∏—Ç—å –∫–ª–∏–µ–Ω—Ç–∞

**UI builders (booking_ui.py):**
- `build_order_card()` - –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞
- `build_order_keyboard()` - –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

### üìÇ handlers/customer/ - –§—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è

#### üìÇ customer/cart/ - –ö–æ—Ä–∑–∏–Ω–∞ –ø–æ–∫—É–ø–æ–∫

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ü–æ–∫—É–ø–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∫–æ—Ä–∑–∏–Ω—É, –ø–æ—Ç–æ–º –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –≤—Å—ë –æ–¥–Ω–∏–º –∑–∞–∫–∞–∑–æ–º.

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
cart/
‚îú‚îÄ‚îÄ router.py              # 1296 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îú‚îÄ‚îÄ cart_ui.py             # UI builders
‚îú‚îÄ‚îÄ cart_checkout.py       # 582 —Å—Ç—Ä–æ–∫–∏ - –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
‚îî‚îÄ‚îÄ storage.py             # In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ—Ä–∑–∏–Ω—ã
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (router.py):**

| –§—É–Ω–∫—Ü–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|---------|------------|
| `show_cart()` | –ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ—Ä–∑–∏–Ω—ã |
| `add_to_cart_start()` | –ù–∞—á–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ |
| `cart_update_quantity()` | –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| `cart_checkout()` | –ù–∞—á–∞—Ç—å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ |
| `cart_confirm_pickup()` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–∞–º–æ–≤—ã–≤–æ–∑ |
| `cart_confirm_delivery()` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É |

**Checkout flow (cart_checkout.py):**
1. –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ (—Å–∞–º–æ–≤—ã–≤–æ–∑/–¥–æ—Å—Ç–∞–≤–∫–∞)
2. –í–≤–æ–¥ –∞–¥—Ä–µ—Å–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞)
3. –í—ã–±–æ—Ä –æ–ø–ª–∞—Ç—ã (Click/–∫–∞—Ä—Ç–∞)
4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
5. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê:** `router.py` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (1296 —Å—Ç—Ä–æ–∫) - –Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å

---

#### üìÇ customer/offers/ - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ü—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–∏—Å–∫ –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
offers/
‚îú‚îÄ‚îÄ browse.py              # 1448 —Å—Ç—Ä–æ–∫ ‚ö†Ô∏è –ö–∞—Ç–∞–ª–æ–≥
‚îú‚îÄ‚îÄ browse_helpers.py      # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îú‚îÄ‚îÄ search.py              # 951 —Å—Ç—Ä–æ–∫–∞ - –ü–æ–∏—Å–∫
‚îî‚îÄ‚îÄ router.py              # –†–æ—É—Ç–µ—Ä
```

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

| –§–∞–π–ª | –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
|------|------------------|
| `browse.py` | `browse_offers()` - –ö–∞—Ç–∞–ª–æ–≥<br>`show_offer_detail()` - –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞<br>`browse_by_city()` - –§–∏–ª—å—Ç—Ä –ø–æ –≥–æ—Ä–æ–¥—É |
| `search.py` | `search_offers()` - –ü–æ–∏—Å–∫<br>`search_results()` - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã |

**‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê:** `browse.py` –æ–≥—Ä–æ–º–Ω—ã–π (1448 —Å—Ç—Ä–æ–∫) - –Ω—É–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏

---

#### üìÇ customer/orders/ - –ó–∞–∫–∞–∑—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏, –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
orders/
‚îú‚îÄ‚îÄ router.py              # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îú‚îÄ‚îÄ delivery.py            # 811 —Å—Ç—Ä–æ–∫ - –§–ª–æ—É –¥–æ—Å—Ç–∞–≤–∫–∏
‚îú‚îÄ‚îÄ delivery_ui.py         # UI –∫–∞—Ä—Ç–æ—á–∫–∏
‚îú‚îÄ‚îÄ delivery_partner.py    # 522 —Å—Ç—Ä–æ–∫–∏ - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º
‚îú‚îÄ‚îÄ delivery_admin.py      # –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã –∞–¥–º–∏–Ω–æ–º
‚îî‚îÄ‚îÄ history.py             # 289 —Å—Ç—Ä–æ–∫ - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
```

**–§–ª–æ—É –¥–æ—Å—Ç–∞–≤–∫–∏ (delivery.py):**
1. `start_delivery_order()` - –ù–∞—á–∞—Ç—å –∑–∞–∫–∞–∑
2. `dlv_change_qty()` - –ò–∑–º–µ–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
3. `dlv_to_address()` - –ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–¥—Ä–µ—Å—É
4. `dlv_address_input()` - –í–≤–µ—Å—Ç–∏ –∞–¥—Ä–µ—Å
5. `dlv_pay_click()` / `dlv_pay_card()` - –û–ø–ª–∞—Ç–∞
6. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –≤ –ë–î

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (delivery_partner.py):**
- `partner_confirm_delivery()` - –ü—Ä–æ–¥–∞–≤–µ—Ü –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç
- `partner_reject_delivery()` - –ü—Ä–æ–¥–∞–≤–µ—Ü –æ—Ç–∫–ª–æ–Ω—è–µ—Ç

---

#### üìÇ –î—Ä—É–≥–∏–µ customer –º–æ–¥—É–ª–∏

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-------|------------|
| `menu.py` | - | –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ (–∫–ª–∏–µ–Ω—Ç/–ø—Ä–æ–¥–∞–≤–µ—Ü) |
| `profile.py` | 436 | –ü—Ä–æ—Ñ–∏–ª—å: —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ |
| `payments.py` | 473 | Telegram Payments (—É—Å—Ç–∞—Ä–µ–≤–∞–µ—Ç) |
| `favorites.py` | - | –ò–∑–±—Ä–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã |
| `features.py` | - | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏ |

---

### üìÇ handlers/seller/ - –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–º, —Ç–æ–≤–∞—Ä–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏:**

```
seller/
‚îú‚îÄ‚îÄ registration.py        # 607 —Å—Ç—Ä–æ–∫ - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
‚îú‚îÄ‚îÄ create_offer.py        # 860 —Å—Ç—Ä–æ–∫ - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
‚îú‚îÄ‚îÄ store_settings.py      # 1231 —Å—Ç—Ä–æ–∫–∞ ‚ö†Ô∏è - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞–≥–∞–∑–∏–Ω–∞
‚îú‚îÄ‚îÄ order_management.py    # 482 —Å—Ç—Ä–æ–∫–∏ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îú‚îÄ‚îÄ bulk_import.py         # 621 —Å—Ç—Ä–æ–∫–∞ - –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç
‚îú‚îÄ‚îÄ import_products.py     # 554 —Å—Ç—Ä–æ–∫–∏ - –ò–º–ø–æ—Ä—Ç –∏–∑ CSV/1C
‚îÇ
‚îî‚îÄ‚îÄ management/            # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏
    ‚îú‚îÄ‚îÄ offers.py          # 736 —Å—Ç—Ä–æ–∫ - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
    ‚îú‚îÄ‚îÄ orders.py          # 406 —Å—Ç—Ä–æ–∫ - –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤
    ‚îú‚îÄ‚îÄ pickup.py          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∞–º–æ–≤—ã–≤–æ–∑–æ–º
    ‚îî‚îÄ‚îÄ utils.py           # 579 —Å—Ç—Ä–æ–∫ - –£—Ç–∏–ª–∏—Ç—ã
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ (registration.py):**
1. `become_partner()` - –ù–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é
2. `register_store_city()` - –í—ã–±—Ä–∞—Ç—å –≥–æ—Ä–æ–¥
3. `register_store_category()` - –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
4. `register_store_name()` - –ù–∞–∑–≤–∞–Ω–∏–µ
5. `register_store_address()` - –ê–¥—Ä–µ—Å
6. `register_store_photo()` - –§–æ—Ç–æ
7. `create_store_from_data()` - –°–æ–∑–¥–∞—Ç—å –≤ –ë–î

**‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–ê:** `store_settings.py` —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π (1231 —Å—Ç—Ä–æ–∫–∞)

---

### üìÇ handlers/admin/ - –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ú–æ–¥–µ—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–æ–≤, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π

**–§–∞–π–ª—ã:**

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-------|------------|
| `dashboard.py` | 1010 ‚ö†Ô∏è | –ì–ª–∞–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∞ |
| `panel.py` | 247 | –î–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∞ |
| `legacy.py` | 408 | –°—Ç–∞—Ä—ã–π –∫–æ–¥ (–º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å) |

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- –û–¥–æ–±—Ä–µ–Ω–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã

---

## üèóÔ∏è App - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ API

### üìÇ app/services/ - –°–µ—Ä–≤–∏—Å—ã

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—Ç handlers

**–§–∞–π–ª—ã:**

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `order_service.py` | ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ) |
| `admin_service.py` | –§—É–Ω–∫—Ü–∏–∏ –∞–¥–º–∏–Ω–∞ |

**OrderService** - –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –∑–∞–∫–∞–∑–æ–≤:
```python
class OrderService:
    async def create_pickup_booking()    # –°–∞–º–æ–≤—ã–≤–æ–∑
    async def create_delivery_order()    # –î–æ—Å—Ç–∞–≤–∫–∞
    async def notify_partners()          # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    async def log_order_created()        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```

**üéØ –¶–µ–ª—å:** –í—Å—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–¥–µ—Å—å

---

### üìÇ app/api/ - WebApp API

**–ß—Ç–æ –∑–¥–µ—Å—å:**
REST API –¥–ª—è Mini App (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

**–§–∞–π–ª—ã:**
- `api_server.py` - FastAPI —Å–µ—Ä–≤–µ—Ä
- `webapp_api.py` - Endpoints (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ —á–µ—Ä–µ–∑ –≤–µ–±)
- `auth.py` - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- `orders.py` - API –¥–ª—è –∑–∞–∫–∞–∑–æ–≤

**Endpoints:**
```
POST /api/orders/create     - –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
GET  /api/orders/history    - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
POST /api/cart/add          - –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
```

---

### üìÇ app/repositories/ - –†–∞–±–æ—Ç–∞ —Å –ë–î

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ü—Ä–æ—Å–ª–æ–π–∫–∞ –º–µ–∂–¥—É services –∏ database

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:**
- `user_repository.py` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `store_repository.py` - –ú–∞–≥–∞–∑–∏–Ω—ã
- `offer_repository.py` - –¢–æ–≤–∞—Ä—ã
- `booking_repository.py` - –ë—Ä–æ–Ω–∏
- `order_repository.py` - –ó–∞–∫–∞–∑—ã (—á–∞—Å—Ç–∏—á–Ω–æ)

**–ü–∞—Ç—Ç–µ—Ä–Ω Repository:**
```python
class UserRepository:
    def __init__(self, db: DatabaseProtocol):
        self.db = db

    async def get_user(self, user_id: int) -> User | None:
        return await self.db.get_user(user_id)
```

---

### üìÇ app/domain/ - –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ú–æ–¥–µ–ª–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π (entities) –∏ value objects

**entities/:**
- `booking.py` - –ú–æ–¥–µ–ª—å –±—Ä–æ–Ω–∏
- `order.py` - –ú–æ–¥–µ–ª—å –∑–∞–∫–∞–∑–∞ (—á–∞—Å—Ç–∏—á–Ω–æ)

**üéØ –¶–µ–ª—å:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å—é–¥–∞ –≤—Å–µ –º–æ–¥–µ–ª–∏ –∏–∑ database.py

---

### üìÇ app/keyboards/ - –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã

**–ß—Ç–æ –∑–¥–µ—Å—å:**
–ì–æ—Ç–æ–≤—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

**–§–∞–π–ª—ã:**
- `__init__.py` - –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –∫–ª–∞–≤–∏–∞—Ç—É—Ä
- `offers.py` - –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã:**
- `main_menu_customer()` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- `main_menu_seller()` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –ø—Ä–æ–¥–∞–≤—Ü–∞
- `cancel_keyboard()` - –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã
- `back_keyboard()` - –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥

---

## üíæ Database - –†–∞–±–æ—Ç–∞ —Å –ë–î

### database.py (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
**3473 —Å—Ç—Ä–æ–∫–∏** - —Å—Ç–∞—Ä—ã–π –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–ª–∞—Å—Å Database
**üéØ –¶–µ–ª—å:** –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤ database_pg_module

### database_pg_module/ - –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

**–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–∏–∫—Å–∏–Ω–∞–º–∏:**

```
database_pg_module/
‚îú‚îÄ‚îÄ core.py                # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
‚îú‚îÄ‚îÄ database.py            # –ì–ª–∞–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å –º–∏–∫—Å–∏–Ω–∞–º–∏
‚îú‚îÄ‚îÄ schema.py              # –°—Ö–µ–º–∞ –ë–î
‚îÇ
‚îî‚îÄ‚îÄ mixins/                # –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –º–∏–∫—Å–∏–Ω—ã
    ‚îú‚îÄ‚îÄ users.py           # –†–∞–±–æ—Ç–∞ —Å users
    ‚îú‚îÄ‚îÄ stores.py          # –†–∞–±–æ—Ç–∞ —Å stores
    ‚îú‚îÄ‚îÄ offers.py          # –†–∞–±–æ—Ç–∞ —Å offers
    ‚îú‚îÄ‚îÄ bookings.py        # –†–∞–±–æ—Ç–∞ —Å bookings
    ‚îú‚îÄ‚îÄ orders.py          # –†–∞–±–æ—Ç–∞ —Å orders
    ‚îú‚îÄ‚îÄ payments.py        # –û–ø–ª–∞—Ç—ã
    ‚îú‚îÄ‚îÄ ratings.py         # –†–µ–π—Ç–∏–Ω–≥–∏
    ‚îú‚îÄ‚îÄ favorites.py       # –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
    ‚îú‚îÄ‚îÄ notifications.py   # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ search.py          # –ü–æ–∏—Å–∫
    ‚îî‚îÄ‚îÄ stats.py           # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–∏–∫—Å–∏–Ω–∞:**
```python
# mixins/bookings.py
class BookingMixin:
    async def create_booking(self, ...):
        """–°–æ–∑–¥–∞—Ç—å –±—Ä–æ–Ω—å."""
        pass

    async def get_booking(self, booking_id: int):
        """–ü–æ–ª—É—á–∏—Ç—å –±—Ä–æ–Ω—å."""
        pass
```

---

## üìù –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### localization.py
**–§—É–Ω–∫—Ü–∏–∏:**
- `get_text(key, lang)` - –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ —É–∑–±–µ–∫—Å–∫–æ–≥–æ
- Fallback –Ω–∞ —Ä—É—Å—Å–∫–∏–π

**–ü—Ä–∏–º–µ—Ä:**
```python
text = get_text("welcome_message", lang="uz")
```

### logging_config.py
**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:**
- JSON –ª–æ–≥–∏ –¥–ª—è production
- –¶–≤–µ—Ç–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è development
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry
- Structured logging

---

## üåê WebApp - Mini App

### webapp/
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
webapp/
‚îú‚îÄ‚îÄ index.html             # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ styles.css             # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ script.js              # JavaScript –ª–æ–≥–∏–∫–∞
‚îî‚îÄ‚îÄ assets/                # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∏–∫–æ–Ω–∫–∏
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç Mini App:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ—Ä–∑–∏–Ω—É
- –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram WebApp API
- –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ backend —á–µ—Ä–µ–∑ REST API
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram bot

---

## üìä –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç—ã

### migrations/
SQLite –º–∏–≥—Ä–∞—Ü–∏–∏ (—É—Å—Ç–∞—Ä–µ–≤—à–∏–µ)

### migrations_alembic/
Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è PostgreSQL (–æ—Å–Ω–æ–≤–Ω—ã–µ)

### tests/
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:**
```
tests/
‚îú‚îÄ‚îÄ services/              # –¢–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ repositories/          # –¢–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îú‚îÄ‚îÄ handlers/              # –¢–µ—Å—Ç—ã handlers (integration)
‚îî‚îÄ‚îÄ conftest.py            # Fixtures
```

**üéØ –¶–µ–ª—å:** –ü–æ–∫—Ä—ã—Ç–∏–µ >50% –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

---

## üîç –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫

### –ì–¥–µ –Ω–∞–π—Ç–∏...

**–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞:**
- ‚úÖ `app/services/order_service.py` - –ì–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å
- `handlers/bookings/customer.py:1067` - create_booking()
- `handlers/customer/cart/router.py:328` - cart_confirm_pickup()
- `handlers/customer/orders/delivery.py` - delivery orders

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä—É:**
- `handlers/bookings/customer.py:1271` - notify_partner_new_booking()
- `handlers/customer/cart/router.py` - –≤–Ω—É—Ç—Ä–∏ confirm_pickup/delivery
- `app/services/order_service.py` - notify_partners()

**UI –∫–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–∞–∑–æ–≤:**
- `handlers/bookings/booking_ui.py` - build_order_card()
- `handlers/bookings/customer.py:67` - build_order_card_text()
- `handlers/customer/orders/delivery_ui.py` - delivery order cards

**–û–ø–ª–∞—Ç–∞:**
- `handlers/customer/payments.py` - Telegram Payments
- `handlers/customer/cart/router.py` - Click/–∫–∞—Ä—Ç–∞ –¥–ª—è –∫–æ—Ä–∑–∏–Ω—ã
- `handlers/customer/orders/delivery.py` - Click/–∫–∞—Ä—Ç–∞ –¥–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
- `handlers/common/registration.py` - –¢–µ–ª–µ—Ñ–æ–Ω + –≥–æ—Ä–æ–¥
- `handlers/seller/registration.py` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞

---

## üö® –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –º–µ—Å—Ç–∞

### –§–∞–π–ª—ã —Ç—Ä–µ–±—É—é—â–∏–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

| –§–∞–π–ª | –°—Ç—Ä–æ–∫ | –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|------|-------|----------|-----------|
| `handlers/customer/offers/browse.py` | 1448 | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π | üî¥ –í—ã—Å–æ–∫–∏–π |
| `handlers/customer/cart/router.py` | 1296 | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, –≤—Å—ë –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ | üî¥ –í—ã—Å–æ–∫–∏–π |
| `handlers/bookings/customer.py` | 1275 | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π | üî¥ –í—ã—Å–æ–∫–∏–π |
| `handlers/seller/store_settings.py` | 1231 | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π | üü° –°—Ä–µ–¥–Ω–∏–π |
| `handlers/admin/dashboard.py` | 1010 | –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π | üü° –°—Ä–µ–¥–Ω–∏–π |
| `database.py` | 3473 | –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –º–æ–Ω–æ–ª–∏—Ç | üü¢ –ù–∏–∑–∫–∏–π (–º–∏–≥—Ä–∞—Ü–∏—è –∏–¥—ë—Ç) |

### –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

**–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ - 6 –º–µ—Å—Ç:**
1. handlers/bookings/customer.py
2. handlers/customer/cart/router.py (pickup)
3. handlers/customer/cart/router.py (delivery)
4. handlers/customer/orders/delivery.py
5. app/api/webapp_api.py
6. app/services/order_service.py ‚úÖ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ)

**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–Ω—ë—Ä–∞–º - 4 –º–µ—Å—Ç–∞:**
1. handlers/bookings/customer.py
2. handlers/customer/cart/router.py
3. handlers/customer/orders/delivery.py
4. app/services/order_service.py ‚úÖ

**UI builders - 3 –º–µ—Å—Ç–∞:**
1. handlers/bookings/customer.py
2. handlers/bookings/booking_ui.py ‚úÖ
3. handlers/customer/orders/delivery_ui.py ‚úÖ

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
   - –≠—Ç–æ—Ç —Ñ–∞–π–ª (PROJECT_MAP.md)
   - `OPTIMIZATION_PLAN.md` - –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏–π
   - `README.md` - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

2. **–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–ª–æ—É:**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: `handlers/common/registration.py`
   - –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏: `handlers/bookings/customer.py`
   - –ö–æ—Ä–∑–∏–Ω–∞: `handlers/customer/cart/`

3. **–ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ —Å—Ä–∞–∑—É:**
   - `database.py` - —É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–ù–æ–≤–∞—è —Ñ–∏—á–∞ - –Ω–∞—á–Ω–∏—Ç–µ —Å:**
   - –°–æ–∑–¥–∞—Ç—å service –≤ `app/services/`
   - –î–æ–±–∞–≤–∏—Ç—å repository –≤ `app/repositories/`
   - –°–æ–∑–¥–∞—Ç—å handler –≤ `handlers/`

2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞:**
   - –ù–∞–π—Ç–∏ –º–µ—Å—Ç–æ —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–π –∫–∞—Ä—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤–æ –≤—Å–µ—Ö –º–µ—Å—Ç–∞—Ö

3. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥:**
   - –ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `OPTIMIZATION_PLAN.md`
   - –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- `OPTIMIZATION_PLAN.md` - –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- `docs/AUDIT_FIXES_APPLIED.md` - –ò—Å—Ç–æ—Ä–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- `docs/BOT_FLOWS.md` - –î–∏–∞–≥—Ä–∞–º–º—ã —Ñ–ª–æ—É
- `docs/DEPLOYMENT_GUIDE.md` - –î–µ–ø–ª–æ–π –Ω–∞ Railway

---

**–í–æ–ø—Ä–æ—Å—ã?** –û–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –≤ –∫–æ–º–∞–Ω–¥–µ!
