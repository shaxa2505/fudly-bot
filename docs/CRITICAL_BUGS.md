# üêõ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

## –ü—Ä–æ–±–ª–µ–º—ã:

1. ‚ùå **–ö–Ω–æ–ø–∫–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è —á–µ–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç** (–§–æ—Ç–æ 1)
2. ‚ùå **–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–∫—Ä–∏–Ω–∞ —á–µ–∫–∞ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è** (–§–æ—Ç–æ 2)
3. ‚ùå **–ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ –∑–∞–∫–∞–∑—ã" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
4. ‚ùå **–ö–Ω–æ–ø–∫–∞ "–ì–æ—Ä—è—á–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è" (inline) –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫** (–§–æ—Ç–æ 3)
5. ‚ùì **–§–∞–π–ª—ã –≤—Å—ë –µ—â—ë –±–æ–ª—å—à–∏–µ –ø–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞**

## –ü—Ä–∏—á–∏–Ω—ã:

### 1-2. –ü—Ä–æ–±–ª–µ–º–∞ —Å —á–µ–∫–∞–º–∏
**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞:**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `cart_payment_proof` –∏ `dlv_payment_proof` –ù–ï –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ FSM
- –†–æ—É—Ç–µ—Ä `delivery_admin.router` –ù–ï –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ `bot.py`
- Callback –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –µ—Å—Ç—å, –Ω–æ photo handler –Ω–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ä–æ—É—Ç–µ—Ä–µ

**–§–∞–π–ª—ã:**
- `handlers/customer/cart/cart_checkout.py:585` - –µ—Å—Ç—å handler, –Ω–æ –Ω–µ –≤ —Ä–æ—É—Ç–µ—Ä–µ
- `handlers/customer/orders/delivery_admin.py` - –µ—Å—Ç—å —Ä–æ—É—Ç–µ—Ä, –Ω–æ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
- `bot.py:466` - –≤–∫–ª—é—á–µ–Ω `orders_router`, –Ω–æ –±–µ–∑ admin –ø–æ–¥—Ä–æ—É—Ç–µ—Ä–∞

### 3. –ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ –∑–∞–∫–∞–∑—ã"
**–ü—Ä–∏—á–∏–Ω–∞:**
- –§–∏–ª—å—Ç—Ä —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–π: `F.text.contains("üì¶") | F.text.contains("–ó–∞–∫–∞–∑—ã")`
- –õ–æ–≤–∏—Ç –ª—é–±–æ–π —Ç–µ–∫—Å—Ç —Å —ç—Ç–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å –¥—Ä—É–≥–∏–º–∏ handlers

### 4. "–ì–æ—Ä—è—á–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è" inline
**–ü—Ä–∏—á–∏–Ω–∞:**
- Callback `hot_offers` —Å–æ–∑–¥–∞—ë—Ç—Å—è, –Ω–æ –ù–ï–¢ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
- –ï—Å—Ç—å —Ç–æ–ª—å–∫–æ message handler –¥–ª—è —Ç–µ–∫—Å—Ç–∞ "üî• –ì–æ—Ä—è—á–µ–µ"
- –ù–µ—Ç `@router.callback_query(F.data == "hot_offers")`

### 5. –§–∞–π–ª—ã –±–æ–ª—å—à–∏–µ
**–ü—Ä–∏—á–∏–Ω–∞:**
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –ù–ï–ü–û–õ–ù–´–ô - —Å–æ–∑–¥–∞–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ UI —Ñ–∞–π–ª—ã, –Ω–æ –Ω–µ —É–¥–∞–ª–∏–ª–∏ –∫–æ–¥ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–≤
- `cart/router.py` - 1296 —Å—Ç—Ä–æ–∫ (–µ—Å—Ç—å `cart_ui.py`, `cart_checkout.py`, –Ω–æ –∫–æ–¥ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è)
- `bookings/customer.py` - 1275 —Å—Ç—Ä–æ–∫ (–µ—Å—Ç—å `booking_ui.py`, –Ω–æ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å)
- `browse.py` - 1448 —Å—Ç—Ä–æ–∫ (–µ—Å—Ç—å `browse_helpers.py`, –Ω–æ –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–ª–∞—Å—å)

## –†–µ—à–µ–Ω–∏—è:

### 1-2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —á–µ–∫–æ–≤
```python
# –í bot.py –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é admin —Ä–æ—É—Ç–µ—Ä–∞
from handlers.customer.orders import delivery_admin

dp.include_router(delivery_admin.router)  # –î–æ–±–∞–≤–∏—Ç—å –ü–û–°–õ–ï orders_router

# –í cart_checkout.py - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ handler –≤ —Ä–æ—É—Ç–µ—Ä–µ
@router.message(F.photo)
async def cart_payment_proof(message: types.Message, state: FSMContext):
    # –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
```

### 3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä "–ú–æ–∏ –∑–∞–∫–∞–∑—ã"
```python
# –í handlers/customer/menu.py
# –ë–´–õ–û:
@router.message(F.text.contains("üì¶") | F.text.contains("–ó–∞–∫–∞–∑—ã"))

# –°–¢–ê–õ–û:
@router.message(F.text.in_(["üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã", "üì¶ Mening buyurtmalarim"]))
```

### 4. –î–æ–±–∞–≤–∏—Ç—å callback –¥–ª—è "–ì–æ—Ä—è—á–µ–µ"
```python
# –í handlers/customer/offers/browse.py
@dp.callback_query(F.data == "hot_offers")
async def hot_offers_callback(callback: types.CallbackQuery, state: FSMContext):
    """Handle hot offers button from cart."""
    if not callback.from_user or not callback.message:
        await callback.answer()
        return

    user_id = callback.from_user.id
    lang = db.get_user_language(user_id)
    user = db.get_user_model(user_id)
    city = user.city if user else "–¢–∞—à–∫–µ–Ω—Ç"
    search_city = normalize_city(city)

    await callback.answer()
    await _send_hot_offers_list(
        callback.message,
        state,
        lang,
        city,
        search_city,
        offer_service,
        logger
    )
```

### 5. –£–º–µ–Ω—å—à–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
**–ü–ª–∞–Ω:**
- –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–æ—É—Ç–∏–Ω–≥ –∏ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ –º–æ–¥—É–ª–µ–π
- –¶–µ–ª—å: –∫–∞–∂–¥—ã–π —Ñ–∞–π–ª <500 —Å—Ç—Ä–æ–∫

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** - –ü—Ä–æ–±–ª–µ–º—ã 1-2 (—á–µ–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç)
2. üî¥ **–ö—Ä–∏—Ç–∏—á–Ω–æ** - –ü—Ä–æ–±–ª–µ–º–∞ 3 (–ú–æ–∏ –∑–∞–∫–∞–∑—ã)
3. üü° **–í–∞–∂–Ω–æ** - –ü—Ä–æ–±–ª–µ–º–∞ 4 (–ì–æ—Ä—è—á–µ–µ inline)
4. üü¢ **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥** - –ü—Ä–æ–±–ª–µ–º–∞ 5 (—Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤)
